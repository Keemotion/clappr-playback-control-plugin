!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Clappr")):"function"==typeof define&&define.amd?define(["Clappr"],e):"object"==typeof exports?exports.PlaybackControlPlugin=e(require("Clappr")):t.PlaybackControlPlugin=e(t.Clappr)}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return t[o].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="<%=baseUrl%>/",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function x(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:x(a,e,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},c=n(5),s=o(c),p=n(4),f=o(p),d=n(3),h=o(d),b=n(1),y=o(b),v="frames",k="seconds",g="down",m="up",w=29,C=function(t){function e(){return a(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return i(e,t),l(e,[{key:"onContainerChanged",value:function(){this.invalidate()}},{key:"seekScaleValue",value:function(t,e){switch(t){case v:this.seekRelativeFrames(e);break;case k:this.seekRelativeSeconds(e)}}},{key:"findButton",value:function(t,e){var n=e>0?"+"+e:e;return this.$el.find('[data-step-scale="'+t+'"][data-step-value="'+n+'"]')}},{key:"highlightButton",value:function(t,e,n){var o=this.findButton(t,e);switch(n){case g:o.children()[1].className="playback-control-action-highlight";break;case m:o.children()[1].className=""}return o}},{key:"onButtonClick",value:function(t){var e=t.currentTarget,n=e.getAttribute("data-step-scale"),o=Number(e.getAttribute("data-step-value"));this.seekScaleValue(n,o)}},{key:"onActionsMouseWheel",value:function(t){var e=t.currentTarget,n=e.getAttribute("data-step-scale"),o=t.detail<0||t.wheelDelta>0?1:-1;return this.seekScaleValue(n,o),t.stopPropagation(),t.preventDefault(),!1}},{key:"bindEvents",value:function(){var t=this,e=this.player;this.listenTo(this.mediaControl,s["default"].Events.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,s["default"].Events.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),f["default"].addKeycodes({144:"numlock"}),f["default"].bind("q",function(){return t.highlightButton(k,-1,g)},"keydown"),f["default"].bind("q",function(){t.highlightButton(k,-1,m),t.seekRelativeSeconds(-1)},"keyup"),f["default"].bind("w",function(){return t.highlightButton(k,1,g)},"keydown"),f["default"].bind("w",function(){t.highlightButton(k,1,m),t.seekRelativeSeconds(1)},"keyup"),f["default"].bind("a",function(){return t.highlightButton(v,-1,g)},"keydown"),f["default"].bind("a",function(){t.highlightButton(v,-1,m),t.seekRelativeFrames(-1)},"keyup"),f["default"].bind("s",function(){return t.highlightButton(v,1,g)},"keydown"),f["default"].bind("s",function(){t.highlightButton(v,1,m),t.seekRelativeFrames(1)},"keyup"),f["default"].bind("space",function(){e.isPlaying()?e.pause():e.play()}),f["default"].bind("up",function(){return t.seekRelativeSeconds(-1)}),f["default"].bind("down",function(){return t.seekRelativeSeconds(1)}),f["default"].bind("left",function(){return t.seekRelativeFrames(-1)}),f["default"].bind("right",function(){return t.seekRelativeFrames(1)}),f["default"].bind("ctrl+-",function(e){e.preventDefault(),e.stopPropagation(),t.seekRelativeFrames(-1)}),f["default"].bind(["ctrl+=","ctrl+plus"],function(e){e.preventDefault(),e.stopPropagation(),t.seekRelativeFrames(1)});var n=function(e,n){return e.preventDefault(),e.stopPropagation(),t.mediaControl.trigger("playbackRate",n),!1};f["default"].bind("0",function(t){return n(t,.5)}),f["default"].bind(["1","numlock+alt+left"],function(t){return n(t,1)}),f["default"].bind(["2","numlock+ctrl+h"],function(t){return n(t,2)}),f["default"].bind(["3","ctrl+shift+o","numlock+ctrl+i"],function(t){return n(t,3)}),f["default"].bind(["4","numlock+ctrl+t"],function(t){return n(t,4)}),f["default"].bind(["5","numlock+alt+right"],function(t){return n(t,5)}),f["default"].bind("6",function(t){return n(t,6)}),f["default"].bind("7",function(t){return n(t,7)}),f["default"].bind("8",function(t){return n(t,8)}),f["default"].bind("9",function(t){return n(t,9)})}},{key:"stopListening",value:function(){u(Object.getPrototypeOf(e.prototype),"stopListening",this).call(this),this.onMouseWheelDelegate&&(this.onMouseWheelDelegate.unbind(),this.onMouseWheelDelegate=null)}},{key:"render",value:function(){var t=s["default"].Styler.getStyleFor(y["default"]);return this.$el.html(this.template()).append(t),this.$el.find('[type="button"]').off("click").on("click",this.onButtonClick.bind(this)),this.$el.find(".playback-control-actions").off("DOMMouseScroll").on("DOMMouseScroll",this.onActionsMouseWheel.bind(this)),this.$el.find(".playback-control-actions").off("mousewheel").on("mousewheel",this.onActionsMouseWheel.bind(this)),this.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.el),this}},{key:"invalidate",value:function(){this.stopListening(),this.bindEvents()}},{key:"getFPS",value:function(){var t=w;return this.player&&this.player.options&&this.player.options.playbackControl&&(t=this.player.options.playbackControl.fps||t),t}},{key:"seekRelativeFrames",value:function(t){var e=this.player;e.isPlaying()&&e.pause();var n=e.getCurrentTime(),o=n+t/this.getFPS();if(o<=0||o>=e.getDuration());else{var a=this.core.getCurrentPlayback();e.seek(o);for(var r=a.el.buffered,i=!1,l=0;l<r.length;l++)if(o>=r.start(l)&&o<=r.end(l)){i=!0;break}i||a.trigger("waiting")}}},{key:"seekRelativeSeconds",value:function(t){var e=this.player;e.isPlaying()&&e.pause();var n=e.getCurrentTime()+t;n<0?n=0:n>e.getDuration()&&(n=e.getDuration()),e.seek(n)}},{key:"name",get:function(){return"playback_control"}},{key:"version",get:function(){return PLUGIN_VERSION}},{key:"template",get:function(){return s["default"].template(h["default"])}},{key:"attributes",get:function(){return{"class":"playback-control"}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"player",get:function(){return this.mediaControl.container}},{key:"config",get:function(){return this.core.options.playbackControlConfig||{keyBindings:[]}}}]),e}(s["default"].UICorePlugin);e["default"]=C},function(t,e,n){e=t.exports=n(2)(),e.push([t.id,"[data-player] div.playback-control{float:left}[data-player] div.playback-control>.playback-control-actions{display:inline-block;margin-left:1px;margin-right:1px;height:28px}[data-player] div.playback-control>.playback-control-actions:hover{background:#eee}[data-player] div.playback-control>.playback-control-actions>button{outline:none;cursor:pointer;border:1px solid #444;margin:1px;text-align:center;width:35px;height:26px}[data-player] div.playback-control>.playback-control-actions>button>sub{outline:none;position:relative;display:inline-block;background:#eee;border-radius:15px;width:25px;border:1px solid;left:-2px;bottom:0;font-weight:700;font-family:Consolas,Lucida Console,Monaco,monospace;font-size:11px}[data-player] div.playback-control>.playback-control-actions>button>sub.playback-control-action-highlight{background:#febf04;border-color:#333;color:#333;position:relative;top:1px;left:1px}[data-player] div.playback-control>.playback-control-actions>button:hover{background:#333;color:#eee}[data-player] div.playback-control>.playback-control-actions>button:hover>sub{border-color:#eee;color:#333}[data-player] div.playback-control>.playback-control-actions>button:active{background:#666;color:#333;border-color:#111;position:relative;top:1px}[data-player] div.playback-control>.playback-control-actions>button:active>sub{background:#111;color:#666;border-color:#111;font-weight:700}[data-player] div.playback-control>.playback-control-actions>button::-moz-focus-inner{border:0}[data-player] div.playback-control>.playback-control-actions[data-step-scale=seconds]>button{background:#00b7ea}[data-player] div.playback-control>.playback-control-actions[data-step-scale=frames]>button{background:#d2ff52}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},a=0;a<this.length;a++){var r=this[a][0];"number"==typeof r&&(o[r]=!0)}for(a=0;a<e.length;a++){var i=e[a];"number"==typeof i[0]&&o[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(t,e){t.exports='<div class="playback-control-actions" data-step-scale="seconds">\n  <button type="button" data-step-value="-1" data-step-scale="seconds" title="Step 1 second backward">\n    <p>-1</p>\n    <sub>Q</sub>\n  </button>\n  <button type="button" data-step-value="+1" data-step-scale="seconds" title="Step 1 second forward">\n    <p>+1</p>\n    <sub>W</sub>\n  </button>\n</div>\n<div class="playback-control-actions" data-step-scale="frames">\n  <button type="button" data-step-value="-1" data-step-scale="frames" title="Step 1 frame backward">\n    <p>-1</p>\n    <sub>A</sub>\n  </button>\n  <button type="button" data-step-value="+1" data-step-scale="frames" title="Step 1 frame forward">\n    <p>+1</p>\n    <sub>S</sub>\n  </button>\n</div>\n'},function(t,e,n){var o;!function(a,r,i){function l(t,e,n){return t.addEventListener?void t.addEventListener(e,n,!1):void t.attachEvent("on"+e,n)}function u(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return w[t.which]?w[t.which]:C[t.which]?C[t.which]:String.fromCharCode(t.which).toLowerCase()}function c(t,e){return t.sort().join(",")===e.sort().join(",")}function s(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function p(t){return t.preventDefault?void t.preventDefault():void(t.returnValue=!1)}function f(t){return t.stopPropagation?void t.stopPropagation():void(t.cancelBubble=!0)}function d(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function h(){if(!m){m={};for(var t in w)t>95&&t<112||w.hasOwnProperty(t)&&(m[w[t]]=t)}return m}function b(t,e,n){return n||(n=h()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function y(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus"),t.split("+"))}function v(t,e){var n,o,a,r=[];for(n=y(t),a=0;a<n.length;++a)o=n[a],P[o]&&(o=P[o]),e&&"keypress"!=e&&x[o]&&(o=x[o],r.push("shift")),d(o)&&r.push(o);return e=b(o,r,e),{key:o,modifiers:r,action:e}}function k(t,e){return null!==t&&t!==r&&(t===e||k(t.parentNode,e))}function g(t){function e(t){t=t||{};var e,n=!1;for(e in m)t[e]?n=!0:m[e]=0;n||(x=!1)}function n(t,e,n,o,a,r){var i,l,u=[],s=n.type;if(!y._callbacks[t])return[];for("keyup"==s&&d(t)&&(e=[t]),i=0;i<y._callbacks[t].length;++i)if(l=y._callbacks[t][i],(o||!l.seq||m[l.seq]==l.level)&&s==l.action&&("keypress"==s&&!n.metaKey&&!n.ctrlKey||c(e,l.modifiers))){var p=!o&&l.combo==a,f=o&&l.seq==o&&l.level==r;(p||f)&&y._callbacks[t].splice(i,1),u.push(l)}return u}function o(t,e,n,o){y.stopCallback(e,e.target||e.srcElement,n,o)||t(e,n)===!1&&(p(e),f(e))}function a(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=u(t);if(e)return"keyup"==t.type&&w===e?void(w=!1):void y.handleKey(e,s(t),t)}function i(){clearTimeout(k),k=setTimeout(e,1e3)}function h(t,n,a,r){function l(e){return function(){x=e,++m[t],i()}}function c(n){o(a,n,t),"keyup"!==r&&(w=u(n)),setTimeout(e,10)}m[t]=0;for(var s=0;s<n.length;++s){var p=s+1===n.length,f=p?c:l(r||v(n[s+1]).action);b(n[s],f,r,t,s)}}function b(t,e,o,a,r){y._directMap[t+":"+o]=e,t=t.replace(/\s+/g," ");var i,l=t.split(" ");return l.length>1?void h(t,l,e,o):(i=v(t,o),y._callbacks[i.key]=y._callbacks[i.key]||[],n(i.key,i.modifiers,{type:i.action},a,t,r),void y._callbacks[i.key][a?"unshift":"push"]({callback:e,modifiers:i.modifiers,action:i.action,seq:a,level:r,combo:t}))}var y=this;if(t=t||r,!(y instanceof g))return new g(t);y.target=t,y._callbacks={},y._directMap={};var k,m={},w=!1,C=!1,x=!1;y._handleKey=function(t,a,r){var i,l=n(t,a,r),u={},c=0,s=!1;for(i=0;i<l.length;++i)l[i].seq&&(c=Math.max(c,l[i].level));for(i=0;i<l.length;++i)if(l[i].seq){if(l[i].level!=c)continue;s=!0,u[l[i].seq]=1,o(l[i].callback,r,l[i].combo,l[i].seq)}else s||o(l[i].callback,r,l[i].combo);var p="keypress"==r.type&&C;r.type!=x||d(t)||p||e(u),C=s&&"keydown"==r.type},y._bindMultiple=function(t,e,n){for(var o=0;o<t.length;++o)b(t[o],e,n)},l(t,"keypress",a),l(t,"keydown",a),l(t,"keyup",a)}if(a){for(var m,w={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},C={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},P={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},_=1;_<20;++_)w[111+_]="f"+_;for(_=0;_<=9;++_)w[_+96]=_;g.prototype.bind=function(t,e,n){var o=this;return t=t instanceof Array?t:[t],o._bindMultiple.call(o,t,e,n),o},g.prototype.unbind=function(t,e){var n=this;return n.bind.call(n,t,function(){},e)},g.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},g.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},g.prototype.stopCallback=function(t,e){var n=this;return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!k(e,n.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},g.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},g.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(w[e]=t[e]);m=null},g.init=function(){var t=g(r);for(var e in t)"_"!==e.charAt(0)&&(g[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},g.init(),a.Mousetrap=g,"undefined"!=typeof t&&t.exports&&(t.exports=g),o=function(){return g}.call(e,n,e,t),!(o!==i&&(t.exports=o))}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(e,n){e.exports=t}])});
//# sourceMappingURL=clappr-playback-control-plugin.min.js.map