!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Clappr")):"function"==typeof define&&define.amd?define(["Clappr"],e):"object"==typeof exports?exports.PlaybackControlPlugin=e(require("Clappr")):t.PlaybackControlPlugin=e(t.Clappr)}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="<%=baseUrl%>/",e(0)}([function(t,n,o){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function t(t,e){var n=[],o=!0,r=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(c){r=!0,a=c}finally{try{!o&&l["return"]&&l["return"]()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function O(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:O(r,e,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},p=o(5),f=r(p),d=o(4),y=r(d),h=o(3),b=r(h),v=o(1),k=r(v),g="frames",m="seconds",w="down",C="up",x={fps:29},_=function(t){function n(){return a(this,n),i(this,Object.getPrototypeOf(n).apply(this,arguments))}return l(n,t),s(n,[{key:"onContainerChanged",value:function(){this.invalidate()}},{key:"seekScaleValue",value:function(t,e){switch(t){case g:this.seekRelativeFrames(e);break;case m:this.seekRelativeSeconds(e)}}},{key:"findButton",value:function(t,e){var n=e>0?"+"+e:e;return this.$el.find('[data-step-scale="'+t+'"][data-step-value="'+n+'"]')}},{key:"highlightButton",value:function(t,e,n){var o=this.findButton(t,e);switch(n){case w:o.children()[1].className="playback-control-action-highlight";break;case C:o.children()[1].className=""}return o}},{key:"onButtonClick",value:function(t){var e=t.currentTarget,n=e.getAttribute("data-step-scale"),o=Number(e.getAttribute("data-step-value"));this.seekScaleValue(n,o)}},{key:"onActionsMouseWheel",value:function(t){var e=t.currentTarget,n=e.getAttribute("data-step-scale"),o=t.detail<0||t.wheelDelta>0?1:-1;return this.seekScaleValue(n,o),t.stopPropagation(),t.preventDefault(),!1}},{key:"bindEvents",value:function(){this.mediaControl.unbindKeyEvents(),this.listenTo(this.mediaControl,f["default"].Events.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,f["default"].Events.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),y["default"].reset();var t=!0,e=!1,n=void 0;try{for(var o,r=Object.entries(this.userInputActionsMap)[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=c(o.value,2),i=a[1],l=!0,s=!1,u=void 0;try{for(var p,d=Object.entries(i.events)[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var h=c(p.value,2),b=h[0],v=h[1];y["default"].bind(i.keys,v,b)}}catch(k){s=!0,u=k}finally{try{!l&&d["return"]&&d["return"]()}finally{if(s)throw u}}}}catch(k){e=!0,n=k}finally{try{!t&&r["return"]&&r["return"]()}finally{if(e)throw n}}}},{key:"stopListening",value:function(){u(Object.getPrototypeOf(n.prototype),"stopListening",this).call(this),this.onMouseWheelDelegate&&(this.onMouseWheelDelegate.unbind(),this.onMouseWheelDelegate=null)}},{key:"render",value:function(){var t=f["default"].Styler.getStyleFor(k["default"]);return this.$el.html(this.template()).append(t),this.$el.find('[type="button"]').off("click").on("click",this.onButtonClick.bind(this)),this.$el.find(".playback-control-actions").off("DOMMouseScroll").on("DOMMouseScroll",this.onActionsMouseWheel.bind(this)),this.$el.find(".playback-control-actions").off("mousewheel").on("mousewheel",this.onActionsMouseWheel.bind(this)),this.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.el),this}},{key:"invalidate",value:function(){this.stopListening(),this.bindEvents()}},{key:"getFPS",value:function(){var t=x.fps;return this.player&&this.player.options&&this.player.options.playbackControl&&(t=this.player.options.playbackControl.fps||t),t}},{key:"seekRelativeFrames",value:function(t){var e=this.player;e.isPlaying()&&e.pause();var n=e.getCurrentTime(),o=n+t/this.getFPS();if(o<=0||o>=e.getDuration());else{var r=this.core.getCurrentPlayback();e.seek(o);for(var a=r.el.buffered,i=!1,l=0;l<a.length;l++)if(o>=a.start(l)&&o<=a.end(l)){i=!0;break}i||r.trigger("waiting")}}},{key:"seekRelativeSeconds",value:function(t){var e=this.player;e.isPlaying()&&e.pause();var n=e.getCurrentTime()+t;n<0?n=0:n>e.getDuration()&&(n=e.getDuration()),e.seek(n)}},{key:"name",get:function(){return"playback_control"}},{key:"version",get:function(){return PLUGIN_VERSION}},{key:"template",get:function(){return f["default"].template(b["default"])}},{key:"attributes",get:function(){return{"class":"playback-control"}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"player",get:function(){return this.mediaControl.container}},{key:"config",get:function(){return this.core.options.playbackControlConfig||x}},{key:"userInputActionsMap",get:function(){var t=this,n={"nav-second-dec":{keys:["down"],events:{keydown:function(){return t.highlightButton(m,-1,w)},keyup:function(){t.highlightButton(m,-1,C),t.seekRelativeSeconds(-1)}}},"nav-second-inc":{keys:["up"],events:{keydown:function(){return t.highlightButton(m,1,w)},keyup:function(){t.highlightButton(m,1,C),t.seekRelativeSeconds(1)}}},"nav-frame-dec":{keys:["left"],events:{keydown:function(){return t.highlightButton(g,-1,w)},keyup:function(){t.highlightButton(g,-1,C),t.seekRelativeFrames(-1)}}},"nav-frame-inc":{keys:["right"],events:{keydown:function(){return t.highlightButton(g,1,w)},keyup:function(){t.highlightButton(g,1,C),t.seekRelativeFrames(1)}}},"playback-pauseresume":{keys:["space"],events:{keypress:function(){console.log("I was pressed",e),t.player.isPlaying()?t.player.pause():t.player.play()}}},"playback-switchrate":{keys:["ctrl+shift+alt+1","ctrl+shift+alt+2","ctrl+shift+alt+3","ctrl+shift+alt+4","ctrl+shift+alt+5","ctrl+shift+alt+6","ctrl+shift+alt+7","0","ctrl+shift+1","ctrl+shift+2","ctrl+shift+3","ctrl+shift+4","ctrl+shift+5","ctrl+shift+6","ctrl+shift+7"],events:{keypress:function(e){var n=String.fromCharCode(e.keyCode),o=e.altKey?-1:1,r=Number(n)*o;t.mediaControl.trigger("playbackRate",r)}}}};return n}}]),n}(f["default"].UICorePlugin);n["default"]=_},function(t,e,n){e=t.exports=n(2)(),e.push([t.id,"[data-player] div.playback-control{float:left}[data-player] div.playback-control>.playback-control-actions{display:inline-block;margin-left:1px;margin-right:1px;height:28px}[data-player] div.playback-control>.playback-control-actions:hover{background:#eee}[data-player] div.playback-control>.playback-control-actions>button{outline:none;cursor:pointer;border:1px solid #444;margin:1px;text-align:center;width:35px;height:26px}[data-player] div.playback-control>.playback-control-actions>button>sub{outline:none;position:relative;display:inline-block;background:#eee;border-radius:15px;width:25px;border:1px solid;left:-2px;bottom:0;font-weight:700;font-family:Consolas,Lucida Console,Monaco,monospace;font-size:11px}[data-player] div.playback-control>.playback-control-actions>button>sub.playback-control-action-highlight{background:#febf04;border-color:#333;color:#333;position:relative;top:1px;left:1px}[data-player] div.playback-control>.playback-control-actions>button:hover{background:#333;color:#eee}[data-player] div.playback-control>.playback-control-actions>button:hover>sub{border-color:#eee;color:#333}[data-player] div.playback-control>.playback-control-actions>button:active{background:#666;color:#333;border-color:#111;position:relative;top:1px}[data-player] div.playback-control>.playback-control-actions>button:active>sub{background:#111;color:#666;border-color:#111;font-weight:700}[data-player] div.playback-control>.playback-control-actions>button::-moz-focus-inner{border:0}[data-player] div.playback-control>.playback-control-actions[data-step-scale=seconds]>button{background:#00b7ea}[data-player] div.playback-control>.playback-control-actions[data-step-scale=frames]>button{background:#d2ff52}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(o[a]=!0)}for(r=0;r<e.length;r++){var i=e[r];"number"==typeof i[0]&&o[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(t,e){t.exports='<div class="playback-control-actions" data-step-scale="seconds">\n  <button type="button" data-step-value="-1" data-step-scale="seconds" title="Step 1 second backward">\n    <p>-1</p>\n    <sub>&darr;</sub>\n  </button>\n  <button type="button" data-step-value="+1" data-step-scale="seconds" title="Step 1 second forward">\n    <p>+1</p>\n    <sub>&uarr;</sub>\n  </button>\n</div>\n<div class="playback-control-actions" data-step-scale="frames">\n  <button type="button" data-step-value="-1" data-step-scale="frames" title="Step 1 frame backward">\n    <p>-1</p>\n    <sub>&larr;</sub>\n  </button>\n  <button type="button" data-step-value="+1" data-step-scale="frames" title="Step 1 frame forward">\n    <p>+1</p>\n    <sub>&rarr;</sub>\n  </button>\n</div>\n'},function(t,e,n){var o;!function(r,a,i){function l(t,e,n){return t.addEventListener?void t.addEventListener(e,n,!1):void t.attachEvent("on"+e,n)}function c(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return w[t.which]?w[t.which]:C[t.which]?C[t.which]:String.fromCharCode(t.which).toLowerCase()}function s(t,e){return t.sort().join(",")===e.sort().join(",")}function u(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function p(t){return t.preventDefault?void t.preventDefault():void(t.returnValue=!1)}function f(t){return t.stopPropagation?void t.stopPropagation():void(t.cancelBubble=!0)}function d(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function y(){if(!m){m={};for(var t in w)t>95&&t<112||w.hasOwnProperty(t)&&(m[w[t]]=t)}return m}function h(t,e,n){return n||(n=y()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function b(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus"),t.split("+"))}function v(t,e){var n,o,r,a=[];for(n=b(t),r=0;r<n.length;++r)o=n[r],_[o]&&(o=_[o]),e&&"keypress"!=e&&x[o]&&(o=x[o],a.push("shift")),d(o)&&a.push(o);return e=h(o,a,e),{key:o,modifiers:a,action:e}}function k(t,e){return null!==t&&t!==a&&(t===e||k(t.parentNode,e))}function g(t){function e(t){t=t||{};var e,n=!1;for(e in m)t[e]?n=!0:m[e]=0;n||(x=!1)}function n(t,e,n,o,r,a){var i,l,c=[],u=n.type;if(!b._callbacks[t])return[];for("keyup"==u&&d(t)&&(e=[t]),i=0;i<b._callbacks[t].length;++i)if(l=b._callbacks[t][i],(o||!l.seq||m[l.seq]==l.level)&&u==l.action&&("keypress"==u&&!n.metaKey&&!n.ctrlKey||s(e,l.modifiers))){var p=!o&&l.combo==r,f=o&&l.seq==o&&l.level==a;(p||f)&&b._callbacks[t].splice(i,1),c.push(l)}return c}function o(t,e,n,o){b.stopCallback(e,e.target||e.srcElement,n,o)||t(e,n)===!1&&(p(e),f(e))}function r(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=c(t);if(e)return"keyup"==t.type&&w===e?void(w=!1):void b.handleKey(e,u(t),t)}function i(){clearTimeout(k),k=setTimeout(e,1e3)}function y(t,n,r,a){function l(e){return function(){x=e,++m[t],i()}}function s(n){o(r,n,t),"keyup"!==a&&(w=c(n)),setTimeout(e,10)}m[t]=0;for(var u=0;u<n.length;++u){var p=u+1===n.length,f=p?s:l(a||v(n[u+1]).action);h(n[u],f,a,t,u)}}function h(t,e,o,r,a){b._directMap[t+":"+o]=e,t=t.replace(/\s+/g," ");var i,l=t.split(" ");return l.length>1?void y(t,l,e,o):(i=v(t,o),b._callbacks[i.key]=b._callbacks[i.key]||[],n(i.key,i.modifiers,{type:i.action},r,t,a),void b._callbacks[i.key][r?"unshift":"push"]({callback:e,modifiers:i.modifiers,action:i.action,seq:r,level:a,combo:t}))}var b=this;if(t=t||a,!(b instanceof g))return new g(t);b.target=t,b._callbacks={},b._directMap={};var k,m={},w=!1,C=!1,x=!1;b._handleKey=function(t,r,a){var i,l=n(t,r,a),c={},s=0,u=!1;for(i=0;i<l.length;++i)l[i].seq&&(s=Math.max(s,l[i].level));for(i=0;i<l.length;++i)if(l[i].seq){if(l[i].level!=s)continue;u=!0,c[l[i].seq]=1,o(l[i].callback,a,l[i].combo,l[i].seq)}else u||o(l[i].callback,a,l[i].combo);var p="keypress"==a.type&&C;a.type!=x||d(t)||p||e(c),C=u&&"keydown"==a.type},b._bindMultiple=function(t,e,n){for(var o=0;o<t.length;++o)h(t[o],e,n)},l(t,"keypress",r),l(t,"keydown",r),l(t,"keyup",r)}if(r){for(var m,w={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},C={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},_={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},O=1;O<20;++O)w[111+O]="f"+O;for(O=0;O<=9;++O)w[O+96]=O;g.prototype.bind=function(t,e,n){var o=this;return t=t instanceof Array?t:[t],o._bindMultiple.call(o,t,e,n),o},g.prototype.unbind=function(t,e){var n=this;return n.bind.call(n,t,function(){},e)},g.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},g.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},g.prototype.stopCallback=function(t,e){var n=this;return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!k(e,n.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},g.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},g.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(w[e]=t[e]);m=null},g.init=function(){var t=g(a);for(var e in t)"_"!==e.charAt(0)&&(g[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},g.init(),r.Mousetrap=g,"undefined"!=typeof t&&t.exports&&(t.exports=g),o=function(){return g}.call(e,n,e,t),!(o!==i&&(t.exports=o))}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(e,n){e.exports=t}])});
//# sourceMappingURL=clappr-playback-control-plugin.min.js.map